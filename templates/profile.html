{% extends "base.html" %}

{% block title %}Profile - Flask App{% endblock %}

{% block content %}
<div style="max-width: 600px; margin: 0 auto; padding: 2rem;">
    <div class="header" style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 2rem;">
        <div>
            <h1 style="color: #000000; margin-bottom: 0.5rem;">Profile Settings</h1>
            <p style="color: #6b7280;">Manage your account information</p>
        </div>
        <div class="user-actions">
            <a href="{{ url_for('auth_bp.logout') }}" class="logout-link">
                <i class="fas fa-sign-out-alt"></i>
                Logout
            </a>
        </div>
    </div>

    <div style="background-color: #f9fafb; padding: 2rem; border-radius: 1rem; border: 1px solid #f3f4f6;">
        <h2 style="color: #000000; margin-bottom: 1.5rem; font-size: 1.25rem;">Update Profile</h2>
        
        <form id="profile-form" style="display: flex; flex-direction: column; gap: 1rem;">
            <div>
                <label for="name" style="display: block; margin-bottom: 0.5rem; font-weight: 600; color: #000000;">Full Name</label>
                <input type="text" id="name" name="name" value="{{ user.name if user else '' }}" required 
                       style="width: 100%; padding: 0.75rem 1rem; border: 1px solid #e5e7eb; border-radius: 0.5rem; font-size: 0.875rem; background-color: #ffffff; transition: all 0.2s ease;"
                       placeholder="Enter your full name">
            </div>

            <div>
                <label for="username" style="display: block; margin-bottom: 0.5rem; font-weight: 600; color: #000000;">Username</label>
                <input type="text" id="username" name="username" value="{{ user.username if user else '' }}" required 
                       style="width: 100%; padding: 0.75rem 1rem; border: 1px solid #e5e7eb; border-radius: 0.5rem; font-size: 0.875rem; background-color: #ffffff; transition: all 0.2s ease;"
                       placeholder="Choose a username">
            </div>

            <div>
                <label for="email" style="display: block; margin-bottom: 0.5rem; font-weight: 600; color: #000000;">Email</label>
                <input type="email" id="email" name="email" value="{{ user.email if user else '' }}" readonly 
                       style="width: 100%; padding: 0.75rem 1rem; border: 1px solid #e5e7eb; border-radius: 0.5rem; font-size: 0.875rem; background-color: #f9fafb; color: #6b7280;"
                       placeholder="Your email">
                <p style="color: #6b7280; font-size: 0.75rem; margin-top: 0.25rem;">Email cannot be changed</p>
            </div>

            <div style="border-top: 1px solid #e5e7eb; padding-top: 1rem; margin-top: 1rem;">
                <h3 style="color: #000000; margin-bottom: 1rem; font-size: 1rem;">Change Password (Optional)</h3>
                
                <div style="margin-bottom: 1rem;">
                    <label for="current_password" style="display: block; margin-bottom: 0.5rem; font-weight: 600; color: #000000;">Current Password</label>
                    <input type="password" id="current_password" name="current_password" 
                           style="width: 100%; padding: 0.75rem 1rem; border: 1px solid #e5e7eb; border-radius: 0.5rem; font-size: 0.875rem; background-color: #ffffff; transition: all 0.2s ease;"
                           placeholder="Enter current password">
                </div>

                <div style="margin-bottom: 1rem;">
                    <label for="new_password" style="display: block; margin-bottom: 0.5rem; font-weight: 600; color: #000000;">New Password</label>
                    <input type="password" id="new_password" name="new_password" 
                           style="width: 100%; padding: 0.75rem 1rem; border: 1px solid #e5e7eb; border-radius: 0.5rem; font-size: 0.875rem; background-color: #ffffff; transition: all 0.2s ease;"
                           placeholder="Enter new password">
                </div>
            </div>

            <button type="submit" 
                    style="background: #000000; color: white; padding: 0.75rem 1rem; border: none; border-radius: 0.5rem; cursor: pointer; font-size: 0.875rem; font-weight: 600; transition: all 0.2s ease; margin-top: 1rem;"
                    onmouseover="this.style.background='#622375'; this.style.transform='translateY(-1px)'"
                    onmouseout="this.style.background='#000000'; this.style.transform='translateY(0)'">
                Update Profile
            </button>
        </form>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script>
    handleFormSubmit('profile-form', '/auth/profile', 'Profile updated successfully!');
</script>
{% endblock %}
